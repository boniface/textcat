
all: ../data.go

pat.go: ../patterns.go
	echo '// THIS IS AN AUTOGENERATED FILE' > pat.go
	echo '// DO NOT EDIT' >> pat.go
	echo >> pat.go
	perl -p -e 's/package textcat/package main/' ../patterns.go >> pat.go

bootstrap: pat.go bootstrap.go
	go build .

../data.go: bootstrap ../samples*/*.txt
	./bootstrap ../samples*/*.txt
	gofmt -w ../data.go
